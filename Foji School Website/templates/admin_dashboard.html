{% extends "base.html" %}
{% block content %}
  <h2>Admin Dashboard</h2>

  <h3>Pending Admissions</h3>
  <ul>
    {% for p in pending %}
      <li>
        {{ p.name }} — class {{ p.class }} — submitted: {{ p.created_at }}
        <a href="{{ url_for('decide_admission', admission_id=p.id, action='accept') }}">Accept</a> |
        <a href="{{ url_for('decide_admission', admission_id=p.id, action='decline') }}">Decline</a>
      </li>
    {% else %}
      <li>No pending admissions</li>
    {% endfor %}
  </ul>

  <h3>Students Progress</h3>
  <ul>
    {% for item in students %}
      <li>{{ item.student.name }} — total HW: {{ item.total_hw }} — submitted: {{ item.submitted }}</li>
    {% else %}
      <li>No students</li>
    {% endfor %}
  </ul>

  <h3>Teacher Activity</h3>
  <ul>
    {% for t in teachers %}
      <li>{{ t.teacher.name if t.teacher.name else t.teacher.email }} — Homeworks: {{ t.homeworks_given }}</li>
    {% else %}
      <li>No teachers</li>
    {% endfor %}
  </ul>
{% endblock %}