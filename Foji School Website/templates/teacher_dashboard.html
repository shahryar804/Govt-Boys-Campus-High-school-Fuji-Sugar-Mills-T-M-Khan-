{% extends "base.html" %}
{% block content %}
  <h2>Teacher Dashboard</h2>
  <p>Welcome, {{ teacher.name if teacher.name else teacher.email if teacher.email else teacher.username }}</p>

  <h3>Create Homework</h3>
  <form action="{{ url_for('create_homework') }}" method="post" enctype="multipart/form-data">
    <input name="title" placeholder="Title" required><br>
    <textarea name="description" placeholder="Description"></textarea><br>
    <label>Class:
      <select name="class">
        {% for i in range(1,11) %}
          <option value="{{ i }}">{{ i }}</option>
        {% endfor %}
      </select>
    </label><br>
    <label>Due date: <input name="due_date" type="date"></label><br>
    <label>Expiry date: <input name="expiry_date" type="date"></label><br>
    <label>Attach file (optional): <input type="file" name="file"></label><br>
    <button type="submit">Create</button>
  </form>

  <h3>Your Homeworks</h3>
  <ul>
    {% for h in homeworks %}
      <li>{{ h.title }} — class {{ h.class }} — due {{ h.due_date or 'N/A' }}
        {% if h.file %}
          — <a href="{{ url_for('download_homework_file', filename=h.file) }}">Attachment</a>
        {% endif %}
      </li>
    {% else %}
      <li>No homeworks yet</li>
    {% endfor %}
  </ul>

  <h3>Submissions</h3>
  <ul>
    {% for sub in submissions %}
      <li>Submission ID: {{ sub.id }} — HW: {{ sub.homework_id }} — Student: {{ sub.student_id }}
        {% if sub.filename %}
          — <a href="{{ url_for('download_submission', filename=sub.filename) }}">Download</a>
        {% endif %}
      </li>
    {% else %}
      <li>No submissions yet</li>
    {% endfor %}
  </ul>

{% endblock %}